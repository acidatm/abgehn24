window.addEventListener("load",function(){const e=new URLSearchParams(window.location.search),t=e.get("grid");window.gridsize=Number(t)||4;let n=document.getElementById("canvas");reseed(),new ACID(n)});let clock=0;const flooring=0;function reseed(){clock=0,window.config={typ:"mod",settings:{defaultColor:"#ffffff",defaultFx:"drv",framerate:30,zoom:.2972972972972973,tips:"off",labels:"on",buttons:"on",transparency:.5495495495495496,showDimensions:"on"},render:{resolution:(Math.min(1,(window.innerWidth+window.innerHeight)*.5/2e3)*.9+.1)*.14,w:0,h:0,x:.01001001001001001,y:.01001001001001001,a:1,mod:"rgb",clrs:[],optimization:{effects:"off",subpixels:"off",feedback:"off",colormodes:"off",txt:"off"},feedback:{quantization:Math.random(),intensity:Math.random(),mix:Math.random(),bend:Math.random(),skew:Math.random(),centerY:Math.random(),centerX:Math.random(),step:Math.random(),darken:0},channels:{r:{amp:1,base:flooring,mod:1-flooring,active:!0},g:{amp:1,base:flooring,mod:1-flooring,active:!0},b:{amp:1,base:flooring,mod:1-flooring,active:!0},a:{amp:1,base:0,mod:1,active:!0}}},osc:[{typ:"osc",min:.5*Math.random(),max:.5+Math.random()*.5,mix:"add",run:!0,fx:{c:["exp","rnd","bit"],bit:Math.random(),cmp:Math.random(),exp:Math.random(),rnd:Math.random(),drv:Math.random()},filter:{lpf:.8*Math.random(),hpf:.8*Math.random()},config:{x:{frq:Math.random()*.1,off:Math.random()},y:{frq:Math.random()*.1,off:Math.random()},z:{frq:Math.random()*.1,off:0,len:Math.random()*.4,mod:Math.random(),cen:Math.random(),shp:Math.random()}},channels:{r:Math.random(),g:Math.random(),b:Math.random(),a:1}},{typ:"prl",min:.5*Math.random(),max:.5+Math.random()*.5,mix:"add",run:!0,fx:{c:["exp","drv"],bit:Math.random(),cmp:Math.random(),exp:Math.random(),rnd:Math.random(),drv:Math.random()},filter:{lpf:.8*Math.random(),hpf:.8*Math.random()},config:{x:{frq:Math.random()*.1,off:Math.random()},y:{frq:Math.random()*.1,off:Math.random()},z:{frq:Math.random()*.1,off:0,len:Math.random()*.4,mod:Math.random(),cen:Math.random(),shp:Math.random()}},channels:{r:Math.random(),g:Math.random(),b:Math.random(),a:1}},{typ:"osc",min:.5*Math.random(),max:.5+Math.random()*.5,mix:"add",run:!0,fx:{c:["cmp"],bit:Math.random(),cmp:Math.random(),exp:Math.random(),rnd:Math.random(),drv:Math.random()},filter:{lpf:.8*Math.random(),hpf:.8*Math.random()},config:{x:{frq:Math.random()*.1,off:Math.random()},y:{frq:Math.random()*.1,off:Math.random()},z:{frq:Math.random()*.1,off:0,len:Math.random()*.4,mod:Math.random(),cen:Math.random(),shp:Math.random()}},channels:{r:Math.random(),g:Math.random(),b:Math.random(),a:1}},{typ:"plx",min:.5*Math.random(),max:.5+Math.random()*.5,mix:"add",run:!0,fx:{c:["exp","rnd"],bit:Math.random(),cmp:Math.random(),exp:Math.random(),rnd:Math.random(),drv:Math.random()},filter:{lpf:.8*Math.random(),hpf:.8*Math.random()},config:{x:{frq:Math.random()*.1,off:Math.random()},y:{frq:Math.random()*.1,off:Math.random()},z:{frq:Math.random()*.1,off:0,len:Math.random()*.4,mod:Math.random(),cen:Math.random(),shp:Math.random()}},channels:{r:Math.random(),g:Math.random(),b:Math.random(),a:1}},{typ:"osc",min:.5*Math.random(),max:.5+Math.random()*.5,mix:"add",run:!0,fx:{c:[],bit:Math.random(),cmp:Math.random(),exp:Math.random(),rnd:Math.random(),drv:Math.random()},filter:{lpf:.8*Math.random(),hpf:.8*Math.random()},config:{x:{frq:Math.random()*.1,off:Math.random()},y:{frq:Math.random()*.1,off:Math.random()},z:{frq:Math.random()*.1,off:0,len:Math.random()*.4,mod:Math.random(),cen:Math.random(),shp:Math.random()}},channels:{r:Math.random(),g:Math.random(),b:Math.random(),a:1}}]}}function ACID(e){this.seed=0,this.canvas=e,this.initiated=!1,this.t=0,this.dynamics={t:0,d:0},this.reseed=function(){this.wavetables.random;for(let e=0;e<100;e++){let t=Math.round(Math.random()*1e3)/1e3;this.wavetables.random.push(t)}this.seed=Math.random()*1e3,noise.seed(Math.random()*1e3)},this.createRender=function(){new ACIDRENDER(this.canvas,this)},this.wavetables={rotation:[[0,1],[.011,.989],[.022,.978],[.033,.967],[.044,.956],[.056,.944],[.067,.933],[.078,.922],[.089,.911],[.1,.9],[.111,.889],[.122,.878],[.133,.867],[.144,.856],[.156,.844],[.167,.833],[.178,.822],[.189,.811],[.2,.8],[.211,.789],[.222,.778],[.233,.767],[.244,.756],[.256,.744],[.267,.733],[.278,.722],[.289,.711],[.3,.7],[.311,.689],[.322,.678],[.333,.667],[.344,.656],[.356,.644],[.367,.633],[.378,.622],[.389,.611],[.4,.6],[.411,.589],[.422,.578],[.433,.567],[.444,.556],[.456,.544],[.467,.533],[.478,.522],[.489,.511],[.5,.5],[.511,.489],[.522,.478],[.533,.467],[.544,.456],[.556,.444],[.567,.433],[.578,.422],[.589,.411],[.6,.4],[.611,.389],[.622,.378],[.633,.367],[.644,.356],[.656,.344],[.667,.333],[.678,.322],[.689,.311],[.7,.3],[.711,.289],[.722,.278],[.733,.267],[.744,.256],[.756,.244],[.767,.233],[.778,.222],[.789,.211],[.8,.2],[.811,.189],[.822,.178],[.833,.167],[.844,.156],[.856,.144],[.867,.133],[.878,.122],[.889,.111],[.9,.1],[.911,.089],[.922,.078],[.933,.067],[.944,.056],[.956,.044],[.967,.033],[.978,.022],[.989,.011],[1,0],[.989,-.011],[.978,-.022],[.967,-.033],[.956,-.044],[.944,-.056],[.933,-.067],[.922,-.078],[.911,-.089],[.9,-.1],[.889,-.111],[.878,-.122],[.867,-.133],[.856,-.144],[.844,-.156],[.833,-.167],[.822,-.178],[.811,-.189],[.8,-.2],[.789,-.211],[.778,-.222],[.767,-.233],[.756,-.244],[.744,-.256],[.733,-.267],[.722,-.278],[.711,-.289],[.7,-.3],[.689,-.311],[.678,-.322],[.667,-.333],[.656,-.344],[.644,-.356],[.633,-.367],[.622,-.378],[.611,-.389],[.6,-.4],[.589,-.411],[.578,-.422],[.567,-.433],[.556,-.444],[.544,-.456],[.533,-.467],[.522,-.478],[.511,-.489],[.5,-.5],[.489,-.511],[.478,-.522],[.467,-.533],[.456,-.544],[.444,-.556],[.433,-.567],[.422,-.578],[.411,-.589],[.4,-.6],[.389,-.611],[.378,-.622],[.367,-.633],[.356,-.644],[.344,-.656],[.333,-.667],[.322,-.678],[.311,-.689],[.3,-.7],[.289,-.711],[.278,-.722],[.267,-.733],[.256,-.744],[.244,-.756],[.233,-.767],[.222,-.778],[.211,-.789],[.2,-.8],[.189,-.811],[.178,-.822],[.167,-.833],[.156,-.844],[.144,-.856],[.133,-.867],[.122,-.878],[.111,-.889],[.1,-.9],[.089,-.911],[.078,-.922],[.067,-.933],[.056,-.944],[.044,-.956],[.033,-.967],[.022,-.978],[.011,-.989],[0,-1],[-.011,-.989],[-.022,-.978],[-.033,-.967],[-.044,-.956],[-.056,-.944],[-.067,-.933],[-.078,-.922],[-.089,-.911],[-.1,-.9],[-.111,-.889],[-.122,-.878],[-.133,-.867],[-.144,-.856],[-.156,-.844],[-.167,-.833],[-.178,-.822],[-.189,-.811],[-.2,-.8],[-.211,-.789],[-.222,-.778],[-.233,-.767],[-.244,-.756],[-.256,-.744],[-.267,-.733],[-.278,-.722],[-.289,-.711],[-.3,-.7],[-.311,-.689],[-.322,-.678],[-.333,-.667],[-.344,-.656],[-.356,-.644],[-.367,-.633],[-.378,-.622],[-.389,-.611],[-.4,-.6],[-.411,-.589],[-.422,-.578],[-.433,-.567],[-.444,-.556],[-.456,-.544],[-.467,-.533],[-.478,-.522],[-.489,-.511],[-.5,-.5],[-.511,-.489],[-.522,-.478],[-.533,-.467],[-.544,-.456],[-.556,-.444],[-.567,-.433],[-.578,-.422],[-.589,-.411],[-.6,-.4],[-.611,-.389],[-.622,-.378],[-.633,-.367],[-.644,-.356],[-.656,-.344],[-.667,-.333],[-.678,-.322],[-.689,-.311],[-.7,-.3],[-.711,-.289],[-.722,-.278],[-.733,-.267],[-.744,-.256],[-.756,-.244],[-.767,-.233],[-.778,-.222],[-.789,-.211],[-.8,-.2],[-.811,-.189],[-.822,-.178],[-.833,-.167],[-.844,-.156],[-.856,-.144],[-.867,-.133],[-.878,-.122],[-.889,-.111],[-.9,-.1],[-.911,-.089],[-.922,-.078],[-.933,-.067],[-.944,-.056],[-.956,-.044],[-.967,-.033],[-.978,-.022],[-.989,-.011],[-1,0],[-.989,.011],[-.978,.022],[-.967,.033],[-.956,.044],[-.944,.056],[-.933,.067],[-.922,.078],[-.911,.089],[-.9,.1],[-.889,.111],[-.878,.122],[-.867,.133],[-.856,.144],[-.844,.156],[-.833,.167],[-.822,.178],[-.811,.189],[-.8,.2],[-.789,.211],[-.778,.222],[-.767,.233],[-.756,.244],[-.744,.256],[-.733,.267],[-.722,.278],[-.711,.289],[-.7,.3],[-.689,.311],[-.678,.322],[-.667,.333],[-.656,.344],[-.644,.356],[-.633,.367],[-.622,.378],[-.611,.389],[-.6,.4],[-.589,.411],[-.578,.422],[-.567,.433],[-.556,.444],[-.544,.456],[-.533,.467],[-.522,.478],[-.511,.489],[-.5,.5],[-.489,.511],[-.478,.522],[-.467,.533],[-.456,.544],[-.444,.556],[-.433,.567],[-.422,.578],[-.411,.589],[-.4,.6],[-.389,.611],[-.378,.622],[-.367,.633],[-.356,.644],[-.344,.656],[-.333,.667],[-.322,.678],[-.311,.689],[-.3,.7],[-.289,.711],[-.278,.722],[-.267,.733],[-.256,.744],[-.244,.756],[-.233,.767],[-.222,.778],[-.211,.789],[-.2,.8],[-.189,.811],[-.178,.822],[-.167,.833],[-.156,.844],[-.144,.856],[-.133,.867],[-.122,.878],[-.111,.889],[-.1,.9],[-.089,.911],[-.078,.922],[-.067,.933],[-.056,.944],[-.044,.956],[-.033,.967],[-.022,.978],[0,1]],random:[.834,.924,.075,.335,.517,.13,.101,.646,.389,.947,.385,.353,.512,.494,.946,.999,.621,.341,.049,.05,.279,.315,.465,.405,.019,.669,.545,.752,.793,.23,.814,.348,.979,.277,.404,.215,.073,.065,.026,.039,.579,.382,.864,.92,.139,.712,.506,.29,.805,.4,.775,.901,.563,.764,.813,.558,.744,.871,.225,.273,.988,.357,.141,.145,.008,.271,.137,.325,.342,.847,.455,.837,.247,.565,.461,.034,.54,.161,.341,.156,.565,.004,.286,.105,.418,.713,.615,.229,.143,.205,.64,.948,.292,.433,.047,.062,.704,.342,.147,.935]},this.get=function(e,t,n,s){let c=e,l=t,o=[0,0,0,0],i=0;for(var r=0;r<5;){r>3&&(e=c,t=l);let a=config.osc[r];if(a.run&&a.type!="off"){switch(a.typ){case"org":i=(noise.simplex3((e+s*(.4994994994994995-a.config.x.off)*1e3)*a.config.x.frq*.1,(t+s*(.4994994994994995-a.config.y.off)*1e3)*a.config.y.frq*.1,(n+s*(.4994994994994995-a.config.z.off)*100)*a.config.z.frq*.01)+1)*.5;let r=i*(1-a.config.z.shp)+(i+this.wavetables.random[Math.round(i*a.config.z.cen*99)])*a.config.z.shp;i=r<0?0:r>1?1:r;break;case"prl":i=(noise.perlin3((e+s*(.4994994994994995-a.config.x.off)*1e3)*a.config.x.frq*.05,(t+s*(.4994994994994995-a.config.y.off)*1e3)*a.config.y.frq*.05,(n+s*(.4994994994994995-a.config.z.off)*100)*a.config.z.frq*.01)+1)*.5;break;case"plx":i=(noise.simplex3((e+s*(.4994994994994995-a.config.x.off)*1e3)*a.config.x.frq*.05,(t+s*(.4994994994994995-a.config.y.off)*1e3)*a.config.y.frq*.05,(n+s*(.4994994994994995-a.config.z.off)*100)*a.config.z.frq*.01)+1)*.5;break;default:let o=((this.wavetables.rotation[Math.round((1-a.config.z.mod)*359)][0]*e+this.wavetables.rotation[Math.round((1-a.config.z.mod)*359)][1]*t)*a.config.z.frq*.1+s*a.config.z.len*1+a.config.z.off)%1;switch(a.typ){case"saw":i=o;break;case"rmp":i=1-o;break;case"sqr":i=o<.5?1:0;break;case"pwm":i=o<a.config.z.cen?1:0;break;case"tri":i=o<.5?o*2:1-(o-.5)*2;break;case"sin":let r=o<.5?o*2:1-(o-.5)*2;i=(1+Math.sin((1.5+r)*Math.PI))*.5;break;case"osc":let e=a.config.z.cen,t=a.config.z.shp,n;o%1<e?n=o%1*1/e:n=1-(o%1-e)*(1/(1-e));let s=(1+Math.sin((1.5+n)*Math.PI))*.5,c=n<e?0:1;t<=.5?i=n*((.5-t)*2)+s*(t*2):i=s*(2-t*2)+c*((t-.5)*2);break}}if(i=a.min+(a.max-a.min)*i,i>=a.filter.hpf*(a.max-a.min)+a.min&&i<=a.min+(1-a.filter.lpf)*(a.max-a.min))switch(a.mix){case"add":o[0]+=i*a.channels.r,o[1]+=i*a.channels.g,o[2]+=i*a.channels.b,o[3]+=i*a.channels.a;break;case"sub":o[0]-=i*a.channels.r,o[1]-=i*a.channels.g,o[2]-=i*a.channels.b,o[3]-=i*a.channels.a;break;case"mlt":o[0]*=i*a.channels.r,o[1]*=i*a.channels.g,o[2]*=i*a.channels.b,o[3]*=i*a.channels.a;break;case"div":o[0]/=i*a.channels.r,o[1]/=i*a.channels.g,o[2]/=i*a.channels.b,o[3]/=i*a.channels.a;break}}r++}let a=.9;switch(config.typ){case"clp":o[0]=Math.max(0,Math.min(1,o[0])),o[1]=Math.max(0,Math.min(1,o[1])),o[2]=Math.max(0,Math.min(1,o[2])),o[3]=Math.max(0,Math.min(1,o[3]));break;case"mod":o[0]=o[0]>a?o[0]%a:o[0],o[1]=o[1]>a?o[1]%a:o[1],o[2]=o[2]>a?o[2]%a:o[2],o[3]=o[3]>a?o[3]%a:o[3];break;case"dyn":s!=this.dynamics.t&&(this.dynamics.t=s,this.dynamics.d=0),o[0]>this.dynamics.d&&(this.dynamics.d=o[0]),o[1]>this.dynamics.d&&(this.dynamics.d=o[1]),o[2]>this.dynamics.d&&(this.dynamics.d=o[2]),o[3]>this.dynamics.d&&(this.dynamics.d=o[3]),o[0]=o[0]/this.dynamics.d,o[1]=o[1]/this.dynamics.d,o[2]=o[2]/this.dynamics.d,o[3]=o[3]/this.dynamics.d;break}return o},this.init=function(){this.createRender(),this.reseed()},this.init()}function ACIDRENDER(e,t){this.canvas=e,this.gl=this.canvas.getContext("webgl",{preserveDrawingBuffer:!1}),this.mothership=t,this.count=1e3,this.upCount=function(){this.count+=.1/config.settings.framerate,clock++,this.count>2147483646&&(this.count=1e3)},this.initiated=!1,this.running=!0,this.stopped=!1,this.scrollContainer=!1,this.dimensions={width:0,height:0},this.resize=function(){this.dimensions.width=window.innerWidth,this.dimensions.height=window.innerHeight,this.canvas.width=this.dimensions.width,this.canvas.height=this.dimensions.height,this.gl.viewport(0,0,this.canvas.width,this.canvas.height)},this.render=function(){let M=0,x=0;this.stopped||setTimeout(function(){requestAnimationFrame(function(){this.render()}.bind(this))}.bind(this),6e4/(config.settings.framerate*60)),gl=this.gl;let _=[],y=[],F=.8;var e,n,s,o,i,a,r,c,l,d,u,m,f,p,g,b,j,w,O,A,S,T,z,B,v=0;let V=(this.dimensions.width+this.dimensions.height)*.5,h=2+config.render.resolution*24;gl.uniform1f(this.resolutionLocation,h+.1);let D=config.render.optimization.subpixels=="on",L=config.render.optimization.feedback=="on",P=config.render.optimization.colormodes=="on",H=config.render.feedback.quantization!=0,t=config.render.a;for(o=0,n=0,j=0,g=0,b=this.scrollContainer?this.count+this.scrollContainer.scrollTop/window.innerHeight*2:this.count;o<this.dimensions.height;){for(;n<this.dimensions.width;){d=n/this.dimensions.width,f=o/this.dimensions.height,L?(u=d<=config.render.feedback.centerX?d/config.render.feedback.centerX:1-(d-config.render.feedback.centerX)/(1-config.render.feedback.centerX),centeredRelY=f<=1-config.render.feedback.centerY?f/(1-config.render.feedback.centerY):1-(f-(1-config.render.feedback.centerY))/config.render.feedback.centerY,O=u*config.render.feedback.skew+centeredRelY*(1-config.render.feedback.skew),m=O*config.render.feedback.bend+config.render.feedback.mix*(1-config.render.feedback.bend),z=u*m+centeredRelY*(1-m),T=Math.min(u*m*2,centeredRelY*(1-m)*2),i=T*config.render.feedback.step+z*(1-config.render.feedback.step),H&&(w=config.render.feedback.quantization*config.render.feedback.quantization,i=Math.round(i*(1/w))*w),i=1-i,l=(i*config.render.feedback.darken+(1-config.render.feedback.darken))*.99+.01,s=this.mothership.get(n,o,0,b+i*config.render.feedback.intensity*100),c=config.render.channels.r.active?(config.render.channels.r.base+s[0]*config.render.channels.r.mod)*config.render.channels.r.amp*l:0,a=config.render.channels.g.active?(config.render.channels.g.base+s[1]*config.render.channels.g.mod)*config.render.channels.g.amp*l:0,r=config.render.channels.b.active?(config.render.channels.b.base+s[2]*config.render.channels.b.mod)*config.render.channels.b.amp*l:0,S=config.render.channels.a.active?(config.render.channels.a.base+s[3]*config.render.channels.a.mod)*config.render.channels.a.amp*l:0):(s=this.mothership.get(n,o,0,b),c=config.render.channels.r.active?(config.render.channels.r.base+s[0]*config.render.channels.r.mod)*config.render.channels.r.amp:0,a=config.render.channels.g.active?(config.render.channels.g.base+s[1]*config.render.channels.g.mod)*config.render.channels.g.amp:0,r=config.render.channels.b.active?(config.render.channels.b.base+s[2]*config.render.channels.b.mod)*config.render.channels.b.amp:0,S=config.render.channels.a.active?(config.render.channels.a.base+s[3]*config.render.channels.a.mod)*config.render.channels.a.amp:0),A=F+(1-d)*(1-F),p=.2126*c+.7152*a+.0722*r,e=p>.5?1:0,e==1&&M++,x++,p=p*A;let C=Math.round(g)%gridsize==0&&Math.round(j+1)%gridsize==0;if(e=e&&C,config.render.mod!="rgb"&&P)switch(config.render.mod){case"ndx":let n=config.render.clrs[Math.min(Math.floor(config.render.clrs.length*e),config.render.clrs.length-1)]||{r:0,g:0,b:0};c=n.r,a=n.g,r=n.b;break;case"grd":let s=config.render.clrs[Math.min(Math.floor(config.render.clrs.length*e),config.render.clrs.length-1)]||{r:0,g:0,b:0},o=config.render.clrs[Math.min(Math.ceil(config.render.clrs.length*e),config.render.clrs.length-1)]||{r:1,g:1,b:1},t=e*config.render.clrs.length%1;c=s.r*(1-t)+o.r*t,a=s.g*(1-t)+o.g*t,r=s.b*(1-t)+o.b*t;break}D?(_.push(c*(1-t)+e*t,0,0,0,a*(1-t)+e*t,0,0,0,r*(1-t)+e*t),y.push(n/this.dimensions.width*2-1,-(o/this.dimensions.height*2-1),n/this.dimensions.width*2-1,-((o+.33333333*h)/this.dimensions.height*2-1),n/this.dimensions.width*2-1,-((o+.66666666*h)/this.dimensions.height*2-1)),v+=3):(_.push(c*(1-t)+e*t,a*(1-t)+e*t,r*(1-t)+e*t),y.push(n/this.dimensions.width*2-1,-(o/this.dimensions.height*2-1)),v+=1),n+=h,g++}n=0,g=0,o+=h,j++}let N=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,N),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(_),gl.STATIC_DRAW);let k=gl.getAttribLocation(this.shaderProgram,"aColor");gl.vertexAttribPointer(k,3,gl.FLOAT,!1,0,0),gl.enableVertexAttribArray(k);let R=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,R),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(y),gl.STATIC_DRAW);let E=gl.getAttribLocation(this.shaderProgram,"coord");gl.vertexAttribPointer(E,2,gl.FLOAT,!1,0,0),gl.enableVertexAttribArray(E),gl.clear(gl.COLOR_BUFFER_BIT),gl.drawArrays(gl.POINTS,0,v),this.upCount();let C=M/x,I=.2-clock*.001;(C<.05||C>I)&&reseed()},this.init=function(){this.scrollContainer=document.getElementById("container");let e=this.gl;e.clearColor(0,0,0,1);let o="attribute vec4 coord;attribute vec4 aColor;varying vec4 vColor;uniform float resolution;void main(void) {gl_Position = coord;gl_PointSize = resolution;vColor = aColor;}",n=e.createShader(e.VERTEX_SHADER);e.shaderSource(n,o),e.compileShader(n);let i="precision mediump float;varying vec4 vColor;void main() {gl_FragColor = vColor;}",s=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(s,i),e.compileShader(s);let t=e.createProgram();e.attachShader(t,n),e.attachShader(t,s),e.linkProgram(t),e.useProgram(t),this.shaderProgram=t,this.resolutionLocation=e.getUniformLocation(t,"resolution"),window.addEventListener("resize",function(){this.resize()}.bind(this)),this.resize(),this.render()},this.init()}(function(){var t,n,o,r,l,d,u,h,a=window.noise={};function s(e,t,n){this.x=e,this.y=t,this.z=n}s.prototype.dot2=function(e,t){return this.x*e+this.y*t},s.prototype.dot3=function(e,t,n){return this.x*e+this.y*t+this.z*n},d=[new s(1,1,0),new s(-1,1,0),new s(1,-1,0),new s(-1,-1,0),new s(1,0,1),new s(-1,0,1),new s(1,0,-1),new s(-1,0,-1),new s(0,1,1),new s(0,-1,1),new s(0,1,-1),new s(0,-1,-1)],l=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],t=new Array(512),n=new Array(512),a.seed=function(e){e>0&&e<1&&(e*=65536),e=Math.floor(e),e<256&&(e|=e<<8);for(var o,s=0;s<256;s++)s&1?o=l[s]^e&255:o=l[s]^e>>8&255,t[s]=t[s+256]=o,n[s]=n[s+256]=d[o%12]},a.seed(0),u=.5*(Math.sqrt(3)-1),r=(3-Math.sqrt(3))/6,h=1/3,o=1/6,a.simplex2=function(e,s){var i,a,c,m,f,p,g,v,b,j,y,_,O,x,C,E=(e+s)*u,l=Math.floor(e+E),d=Math.floor(s+E),w=(l+d)*r,o=e-l+w,h=s-d+w;return o>h?(p=1,m=0):(p=0,m=1),v=o-p+r,b=h-m+r,g=o-1+2*r,f=h-1+2*r,l&=255,d&=255,O=n[l+t[d]],x=n[l+p+t[d+m]],C=n[l+1+t[d+1]],c=.5-o*o-h*h,c<0?j=0:(c*=c,j=c*c*O.dot2(o,h)),a=.5-v*v-b*b,a<0?_=0:(a*=a,_=a*a*x.dot2(v,b)),i=.5-g*g-f*f,i<0?y=0:(i*=i,y=i*i*C.dot2(g,f)),70*(j+_+y)},a.simplex3=function(e,s,i){var l,d,u,m,f,p,j,y,_,w,O,x,C,E,k,A,S,M,F,z,N,L,R,P,H,I,B,D=(e+s+i)*h,g=Math.floor(e+D),v=Math.floor(s+D),b=Math.floor(i+D),T=(g+v+b)*o,r=e-g+T,c=s-v+T,a=i-b+T;return r>=c?c>=a?(l=1,m=0,f=0,p=1,u=1,d=0):r>=a?(l=1,m=0,f=0,p=1,u=0,d=1):(l=0,m=0,f=1,p=1,u=0,d=1):c<a?(l=0,m=0,f=1,p=0,u=1,d=1):r<a?(l=0,m=1,f=0,p=0,u=1,d=1):(l=0,m=1,f=0,p=1,u=1,d=0),C=r-l+o,E=c-m+o,k=a-f+o,A=r-p+2*o,S=c-u+2*o,M=a-d+2*o,O=r-1+3*o,x=c-1+3*o,F=a-1+3*o,g&=255,v&=255,b&=255,P=n[g+t[v+t[b]]],H=n[g+l+t[v+m+t[b+f]]],I=n[g+p+t[v+u+t[b+d]]],B=n[g+1+t[v+1+t[b+1]]],j=.6-r*r-c*c-a*a,j<0?z=0:(j*=j,z=j*j*P.dot3(r,c,a)),y=.6-C*C-E*E-k*k,y<0?R=0:(y*=y,R=y*y*H.dot3(C,E,k)),_=.6-A*A-S*S-M*M,_<0?L=0:(_*=_,L=_*_*I.dot3(A,S,M)),w=.6-O*O-x*x-F*F,w<0?N=0:(w*=w,N=w*w*B.dot3(O,x,F)),32*(z+R+L+N)};function c(e){return e*e*e*(e*(e*6-15)+10)}function i(e,t,n){return(1-n)*e+n*t}a.perlin2=function(e,s){var r,l,d,u,h,o=Math.floor(e),a=Math.floor(s);return e=e-o,s=s-a,o=o&255,a=a&255,l=n[o+t[a]].dot2(e,s),d=n[o+t[a+1]].dot2(e,s-1),u=n[o+1+t[a]].dot2(e-1,s),h=n[o+1+t[a+1]].dot2(e-1,s-1),r=c(e),i(i(l,u,r),i(d,h,r),c(s))},a.perlin3=function(e,s,o){var d,u,h,m,f,p,g,v,b,j,y,a=Math.floor(e),r=Math.floor(s),l=Math.floor(o);return e=e-a,s=s-r,o=o-l,a=a&255,r=r&255,l=l&255,y=n[a+t[r+t[l]]].dot3(e,s,o),b=n[a+t[r+t[l+1]]].dot3(e,s,o-1),m=n[a+t[r+1+t[l]]].dot3(e,s-1,o),h=n[a+t[r+1+t[l+1]]].dot3(e,s-1,o-1),f=n[a+1+t[r+t[l]]].dot3(e-1,s,o),p=n[a+1+t[r+t[l+1]]].dot3(e-1,s,o-1),g=n[a+1+t[r+1+t[l]]].dot3(e-1,s-1,o),v=n[a+1+t[r+1+t[l+1]]].dot3(e-1,s-1,o-1),d=c(e),j=c(s),u=c(o),i(i(i(y,f,d),i(b,p,d),u),i(i(m,g,d),i(h,v,d),u),j)}})(this)