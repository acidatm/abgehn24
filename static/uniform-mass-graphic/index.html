<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>UNIFORM MASS</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no,maximum-scale=1,minimum-scale=0.86">
    <style>
      html,body{
          background: #000000;
          cursor: none;
      }
      #svgContainer{
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%,-50%);
        z-index: 1;
      }
      #description{
        font-size: calc(1.5vh - 0.2vw);
        line-height: 1.2em;
        color: white;
        font-family: monospace;
        user-select: none;
        pointer-events: none;
        text-transform: uppercase;
        position: fixed;
        bottom: 1em;
        right: 1em;
        text-align: right;
        width: calc(100vw - 2em);
        z-index: 2;
      }
    </style>
  </head>
  <body>
    <div id="description">
      "Uniform Mass"<br>
      Animated Interactive SVG<br>
      HTML, XML, CSS, JS<br>
      2021<br>
      (c)Johannes Hassenstein
    </div>
    <div id="svgContainer">
      <svg
         width="793.75006mm"
         height="793.75mm"
         viewBox="0 0 793.75006 793.75"
         version="1.1"
         id="svg2382"
         inkscape:version="1.1 (c68e22c387, 2021-05-23)"
         sodipodi:docname="index.svg"
         xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
         xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
         xmlns="http://www.w3.org/2000/svg"
         xmlns:svg="http://www.w3.org/2000/svg">
        <sodipodi:namedview
           id="namedview2384"
           pagecolor="#ffffff"
           bordercolor="#666666"
           borderopacity="1.0"
           inkscape:pageshadow="2"
           inkscape:pageopacity="0.0"
           inkscape:pagecheckerboard="true"
           inkscape:document-units="mm"
           showgrid="false"
           inkscape:zoom="0.070630697"
           inkscape:cx="3645.7236"
           inkscape:cy="1649.4245"
           inkscape:window-width="1920"
           inkscape:window-height="1016"
           inkscape:window-x="0"
           inkscape:window-y="0"
           inkscape:window-maximized="1"
           inkscape:current-layer="layer1" />
        <defs
           id="defs2379" />
        <g
           inkscape:label="Ebene 1"
           inkscape:groupmode="layer"
           id="layer1"
           transform="translate(1061.4946,199.53722)">
          <rect
             style="fill:#000000;fill-opacity:1;stroke-width:26.6219;paint-order:markers fill stroke"
             id="rect4228"
             width="793.75"
             height="793.75"
             x="-1061.4946"
             y="-199.53722"
             inkscape:export-filename="/home/nemo/Schreibtisch/um/um1.png"
             inkscape:export-xdpi="96"
             inkscape:export-ydpi="96" />
          <g
             id="axe3"
             transform="translate(-2381.25)">
            <rect
               style="fill:#000000;fill-opacity:0;stroke-width:6.00001;paint-order:markers fill stroke"
               id="rect3743"
               width="793.75"
               height="793.75"
               x="1319.7554"
               y="-199.53722" />
            <rect
               style="fill:#ffffff;stroke-width:6.00001;paint-order:markers fill stroke"
               id="rect3321"
               width="549.31287"
               height="83.401611"
               x="-1983.8689"
               y="211.98198"
               transform="rotate(-165)" />
          </g>
          <g
             id="axe2"
             transform="translate(-793.75)">
            <rect
               style="fill:#000000;fill-opacity:0;stroke-width:6.00001;paint-order:markers fill stroke"
               id="rect4184"
               width="793.75"
               height="793.75"
               x="-267.74463"
               y="-199.53722" />
            <rect
               style="fill:#ffffff;stroke-width:6.00001;paint-order:markers fill stroke"
               id="rect4194"
               width="549.31287"
               height="83.401611"
               x="-322.88638"
               y="189.14684"
               transform="rotate(-45)" />
          </g>
          <g
             id="axe1"
             transform="translate(-1587.5)">
            <rect
               style="fill:#000000;fill-opacity:0;stroke-width:6.00001;paint-order:markers fill stroke"
               id="rect4206"
               width="793.75"
               height="793.75"
               x="526.00537"
               y="-199.53722" />
            <rect
               style="fill:#ffffff;stroke-width:6.00001;paint-order:markers fill stroke"
               id="rect4222"
               width="549.31287"
               height="83.401611"
               x="154.81619"
               y="-882.06018"
               transform="rotate(75)" />
          </g>
          <g
             id="line2"
             transform="translate(-793.75,-793.75)">
            <rect
               style="fill:#000000;fill-opacity:0;stroke-width:6.00001;paint-order:markers fill stroke"
               id="rect970"
               width="793.75"
               height="793.75"
               x="-267.74463"
               y="594.21277" />
            <rect
               style="fill:#000000;stroke-width:2.88499;paint-order:markers fill stroke"
               id="rect974"
               width="5"
               height="83.402"
               x="-800.75037"
               y="750.41284"
               transform="rotate(-45)" />
          </g>
          <g
             id="line1"
             transform="translate(-1587.5,-793.74998)">
            <rect
               style="fill:#000000;fill-opacity:0;stroke-width:6.00001;paint-order:markers fill stroke"
               id="rect978"
               width="793.75"
               height="793.75"
               x="526.00537"
               y="594.21277" />
            <rect
               style="fill:#000000;stroke-width:2.88499;paint-order:markers fill stroke"
               id="rect982"
               width="5"
               height="83.402"
               x="1004.9218"
               y="-676.62256"
               transform="rotate(75)" />
          </g>
          <g
             id="line3"
             transform="translate(-2381.25,-793.75)">
            <rect
               style="fill:#000000;fill-opacity:0;stroke-width:6.00001;paint-order:markers fill stroke"
               id="rect986"
               width="793.75"
               height="793.75"
               x="1319.7554"
               y="594.21277" />
            <rect
               style="fill:#000000;stroke-width:2.88499;paint-order:markers fill stroke"
               id="rect990"
               width="5"
               height="83.402"
               x="-2105.9045"
               y="-554.72162"
               transform="rotate(-165)" />
          </g>
        </g>
      </svg>
    </div>
    <script>
      const autoplay = new URLSearchParams(window.location.search).has("autoplay")
      window.addEventListener("load",function(){
        let svg = document.getElementById("svg2382");
        let resize = function(){
          let aspect = Math.min(window.innerWidth,window.innerHeight)
          svg.setAttribute("height", aspect + "px")
          svg.setAttribute("width", aspect + "px")
        }
        let c = 793.75 * 0.5
        window.addEventListener("resize",resize)
        resize()
        let animations = []
        let layers = [
          svg.getElementById("axe1"),
          svg.getElementById("axe2"),
          svg.getElementById("axe3"),
          svg.getElementById("line1"),
          svg.getElementById("line2"),
          svg.getElementById("line3")
        ]
        let offsets = [randomOffset(),randomOffset(),randomOffset()]
        for(let l in layers){
          let layer = layers[l]
          let anim =  document.createElementNS('http://www.w3.org/2000/svg',"animateTransform")
          let v = offsets[l % 3]
          layer.style.transformBox = "fill-box";
          anim.setAttribute("dur","1s")
          anim.setAttribute("beg", "0s")
          anim.setAttribute("values","0 " + c + " " + c + ";" + v + " " + c + " " + c)
          anim.setAttribute("repeatCount","1")
          anim.setAttribute("additive","sum")
          anim.setAttribute("fill","freeze")
          anim.setAttribute("attributeName","transform")
          anim.setAttribute("attributeType","XML")
          anim.setAttribute("type","rotate")
          anim.setAttribute("calcMode","spline")
          anim.setAttribute("keyTimes","0;1")
          anim.setAttribute("keySplines",".8,.2,.92,0")
          animations.push(anim)
          layer.appendChild(anim)
        }
        let animate = function(){
          let from = offsets
          offsets = [randomOffset(),randomOffset(),randomOffset()]
          for(let a in animations){
            let anim = animations[a]
            let f = from[a % 3]
            let t = offsets[a % 3]
            anim.setAttribute("values",f + " " + c + " " + c + ";" + t + " " + c + " " + c)
            anim.beginElement()
          }
        }
        if(autoplay){
          setInterval(function () {
            setTimeout(function () {
              animate()
            }, Math.random() * 1500);
          }, 3000);
        }
        else{
          window.addEventListener("touchstart",animate)
          window.addEventListener("click",animate)
        }
      })
      function randomOffset(){
        return -18 + Math.round(Math.random() * 36)
      }
    </script>
  </body>
</html>
